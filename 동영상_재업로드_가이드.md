# 동영상 재업로드 가이드 🎬

## 문제 상황
- 원본 파일: `korea_hiphop_ai_musicvedio_satan1.mp4` (42.1 MB)
- 업로드된 파일: 10 MB만 저장됨 (2개 청크만 업로드됨)
- 원인: 업로드 중 중단되었거나 네트워크 오류

## 해결 방법

### 1. 기존 콘텐츠 삭제
1. 관리자 페이지 → 콘텐츠 관리 (`http://localhost:3001/admin/content`)
2. "satan" 콘텐츠 찾기
3. "삭제" 버튼 클릭

### 2. 새로 업로드
1. 직접 영상 업로드 페이지로 이동: `http://localhost:3001/admin/upload-direct`
2. 파일 선택: `korea_hiphop_ai_musicvedio_satan1.mp4` (42.1 MB)
3. 제목 입력: 원하는 제목 (예: "Korea Hip Hop AI Music Video")
4. 설명 입력 (선택)
5. 썸네일 이미지 업로드 (선택)
6. "업로드 시작" 버튼 클릭
7. **중요**: 업로드가 완료될 때까지 페이지를 닫거나 새로고침하지 마세요!

### 3. 업로드 진행 상황 확인
- 청크 업로드: "청크 1/9", "청크 2/9", ... "청크 9/9"
- 진행률: 0% → 100%
- 완료 메시지: "✅ 업로드 완료! 메인 페이지로 이동합니다..."

### 4. 메뉴에 추가
업로드 완료 후:
1. 콘텐츠 관리 페이지로 이동
2. 업로드한 콘텐츠 찾기
3. "📂 메뉴로 이동" 버튼 클릭
4. 원하는 메뉴 선택 (예: blog, video 등)

## 업로드 설정 확인

### Next.js 설정 (이미 완료됨)
```typescript
// next.config.ts
experimental: {
  serverActions: {
    bodySizeLimit: '2gb',  ✅
  },
}
```

### 청크 업로드 설정 (이미 완료됨)
- 청크 크기: 5MB
- 최대 파일 크기: 2GB
- 타임아웃: 300초 (5분)

## 예상 업로드 시간
- 42.1 MB 파일
- 청크 개수: 약 9개 (42.1 MB ÷ 5 MB)
- 예상 시간: 1-3분 (네트워크 속도에 따라 다름)

## 문제 해결

### 업로드 중 오류 발생 시
1. **네트워크 오류**
   - 인터넷 연결 확인
   - 다시 시도

2. **타임아웃 오류**
   - 서버 재시작
   - 파일 크기 확인 (2GB 이하인지)

3. **청크 업로드 실패**
   - 브라우저 콘솔 (F12) 확인
   - 오류 메시지 확인
   - 서버 로그 확인

### 서버 로그 확인
서버 콘솔에서 다음과 같은 메시지를 확인하세요:
```
📦 청크 1/9 수신 완료 (5242880 bytes)
📦 청크 2/9 수신 완료 (5242880 bytes)
...
📦 청크 9/9 수신 완료 (2097152 bytes)
✅ 파일 업로드 완료: public/uploads/asset-xxx/index.mp4 (44040192 bytes)
```

## 업로드 후 확인

### 1. 파일 크기 확인
업로드 완료 후 서버 로그에서 파일 크기를 확인하세요:
- 예상: 약 44,040,192 bytes (42.1 MB)
- 실제: 서버 로그의 "파일 업로드 완료" 메시지 확인

### 2. 동영상 재생 테스트
1. 메인 페이지에서 콘텐츠 카드 클릭
2. 상세 페이지에서 동영상 재생 버튼 클릭
3. 동영상이 정상적으로 재생되는지 확인

### 3. 직접 파일 접근
브라우저에서 직접 동영상 파일에 접근:
```
http://localhost:3001/uploads/asset-[ID]/index.mp4
```

## 주의사항

### 업로드 중
- ⚠️ 페이지를 닫거나 새로고침하지 마세요
- ⚠️ 브라우저 탭을 전환해도 괜찮지만, 닫지는 마세요
- ⚠️ 컴퓨터가 절전 모드로 들어가지 않도록 주의

### 업로드 후
- ✅ 저장 버튼은 한 번만 클릭
- ✅ 업로드 완료 메시지를 확인한 후 페이지 이동
- ✅ 메뉴 추가는 콘텐츠 관리 페이지에서

## 대안: video-upload 페이지 사용
더 간단한 업로드를 원하시면:
1. `http://localhost:3001/admin/video-upload` 접속
2. 파일 선택 및 업로드
3. 자동으로 콘텐츠 생성 페이지로 이동
4. 제목, 설명, 메뉴 선택 후 저장

## 서버 정보
- 현재 포트: 3001
- 업로드 디렉터리: `public/uploads/`
- 임시 디렉터리: `public/uploads/.temp/`
